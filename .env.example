# --------------------------------------------------------------
# Database Configuration
DATABASE_URL=file:./molos_data/molos.db

# --------------------------------------------------------------
# Authentication
BETTER_AUTH_SECRET=your_secret_key_here

# --------------------------------------------------------------
# Base URL for Better Auth (match the URL you access in the browser)
BETTER_AUTH_URL=http://127.0.0.1:4173
# Alternatively, use a file for the secret (recommended for Docker)
# BETTER_AUTH_SECRET_FILE=/run/secrets/better_auth_secret

# --------------------------------------------------------------
# Module Management
MOLOS_AUTOLOAD_MODULES=true

# --------------------------------------------------------------
# Allow production rebuilds after module installs (recommended for container use)
MOLOS_ENABLE_PROD_BUILD=true

# --------------------------------------------------------------
# Docker-specific Configuration
# Port for the application (default: 4173)
PORT=4173

# --------------------------------------------------------------
# Canonical server origin (SvelteKit adapter-node uses this for CSRF checks)
ORIGIN=http://127.0.0.1:4173

# --------------------------------------------------------------
# CSRF trusted origins (comma-separated list of allowed origins)
# When behind a reverse proxy or Cloudflare, add your domain(s) here
CSRF_TRUSTED_ORIGINS=http://localhost:4173,http://127.0.0.1:4173

# --------------------------------------------------------------
# GitHub repository for image tags (used in docker-compose.yml)
GITHUB_REPOSITORY=molos/molos

# --------------------------------------------------------------
# Force rebuild on startup (for development)
FORCE_REBUILD=false

# --------------------------------------------------------------
# Logging level (for future use)
LOG_LEVEL=info


# --------------------------------------------------------------
# Maximum number of retry attempts before giving up
# Default: 3
# Range: 0-10
MOLOS_RETRY_MAX_RETRIES=5


# --------------------------------------------------------------
# Initial delay between retries in milliseconds
# Default: 5000 (5 seconds)
# Range: 1000-60000 (1 second to 1 minute)

MOLOS_RETRY_DELAY=10000


# --------------------------------------------------------------
# With exponential backoff (default):
#   Attempt 1: 5s delay
#   Attempt 2: 10s delay
#   Attempt 3: 20s delay
# With exponential backoff disabled:
#   All attempts: 5s delay
# Grace period in milliseconds before allowing another retry
# Default: 300000 (5 minutes)
# Range: 60000-3600000 (1 minute to 1 hour)
MOLOS_RETRY_GRACE_PERIOD=600000


# --------------------------------------------------------------
# This prevents rapid retry loops. A module that failed
# recently won't be retried until this period expires.
# Use exponential backoff for retry delays
# Default: true
# true:  delay doubles with each attempt (5s, 10s, 20s, 40s...)
# false: fixed delay between all attempts (5s, 5s, 5s, 5s...)

MOLOS_RETRY_EXPONENTIAL_BACKOFF=false